<!doctype html>
<html lang="en">
    <head>    
        
        <title>Running Docker in Windows without virtualization - CodeMade</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="google" content="notranslate" />
        <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:400,400i,700,700i" rel="stylesheet">
        <link rel="stylesheet" href="/assets/css/main.css">
        <link rel="alternate" type="application/atom+xml" href="/atom.xml">

        <meta name="twitter:creator" content="@lorisdev">
        <meta name="twitter:site" content="@lorisdev">
        <meta name="twitter:title" content="Running Docker in Windows without virtualization">




        <meta name="twitter:description" content="What do you do when you need to run Docker, but don't have virtualization support on your machine? You can connect Docker Desktop to a remote server!">




        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:image:src" content="https://codemade.net/images/vms.jpg">

        <meta name="twitter:url" content="https://codemade.net/blog/docker-desktop-with-remote-server/">

    </head>
    <body>
        
        <div id="page" class="site palette-blue">
  <header id="masthead" class="site-header outer">
  <div class="inner">
    <div class="site-header-inside">

      <div class="site-branding">
        
        
        <p class="site-logo">
          <a href='/'>
            <img src="/images/logo-blur.svg" alt="Logo" />
          </a>
        </p><!-- .site-logo -->
        
        
        <p class="site-title"><a href='/'>CodeMade</a></p>
        
      </div><!-- .site-branding -->

      
      <nav id="main-navigation" class="site-navigation" aria-label="Main Navigation">
        <div class="site-nav-inside">
          <button id="menu-close" class="menu-toggle"><span class="screen-reader-text">Open Menu</span><span
              class="icon-close" aria-hidden="true"></span></button>
          <ul class="menu">
            
              
              
              <li class="menu-item">
                <a href="/"
                   
                   >Home</a>
              </li>
            
              
              
              <li class="menu-item">
                <a href="/clock"
                   
                   >Clock</a>
              </li>
            
              
              
              <li class="menu-item menu-button">
                <a href="https://games.codemade.net"
                   
                   class="button">üïπÔ∏è Games!</a>
              </li>
            
              
              
              <li class="menu-item menu-button">
                <a href="/blog"
                   
                   class="button">Blog</a>
              </li>
            
          </ul><!-- .menu -->
        </div><!-- .site-nav-inside -->
      </nav><!-- .site-navigation -->
      <button id="menu-open" class="menu-toggle"><span class="screen-reader-text">Close Menu</span><span class="icon-menu"
          aria-hidden="true"></span></button>
      

    </div><!-- .site-header-inside -->
  </div><!-- .inner -->
</header><!-- .site-header -->

  <main id="content" class="site-content">
    <div class="outer">
  <div class="inner-medium">

    <article class="post post-full">
      <header class="post-header">
        <h1 class="post-title">Running Docker in Windows without virtualization</h1>
      </header><!-- .post-header -->
      
      
      <div class="post-thumbnail">
        <img src="/images/vms.jpg" alt="Running Docker in Windows without virtualization" />
      </div><!-- .post-thumbnail -->
      
      
      
      <div class="post-content">
        <p>Docker is an essential tool for developers. It allows you to run applications in isolated containers, making it easy to manage dependencies and run the same code in different environments.</p>

<p>However, on Windows Docker requires virtualization support, which may not always be enabled or available. Even when using WSL2 as an alternative to Hyper-V, your machine must still support and enable Hyper-V.</p>

<p>Recently I needed to run docker on a Windows virtual machine, running inside VirtualBox on a Linux host.</p>

<p>Contrary to KVM/QEMU, VirtualBox does not support nested virtualization, <em>unless</em> you‚Äôre using VirtualBox inside the VM too.</p>

<p>What VirtualBox offers, however, is much better (read: acceptable) video hardware acceleration compared to QEMU - and for someone like me who spends more time attending remote meetings than running containers, this is a good tradeoff.</p>

<p>I <em>do</em> however need to run containers from time to time, and having to switch to a different machine just for that is a bit of a hassle.</p>

<div class="callout">
<p>‚ö†Ô∏è</p>
<p>
  <strong>Important!</strong> We're going to install Docker Desktop in this guide &mdash; however, without Hyper-V <strong>you won't be able</strong> to run the docker engine or <strong>do anything in the GUI</strong>.
</p>
<p>
  Instead, we're relying on Docker desktop to provide the <code>docker</code> command line tool, which we'll be using to connect to a Linux server.
</p>
</div>

<h2 id="step-1-install-docker-desktop">Step 1: Install Docker Desktop</h2>

<p>Most online resources will point you to Docker Toolbox, which as of 2025 is a legacy solution that is no longer maintained. While you <em>can</em> still download it and install it, it‚Äôs stuck on a very old version of Docker and is missing some crucial components like <code class="language-plaintext highlighter-rouge">buildx</code>.</p>

<p>Here is the link to the <a href="https://docs.docker.com/desktop/setup/install/windows-install/">Docker Desktop download page</a>.</p>

<p>Docker Desktop should install just fine, but of course it will complain if you try to run it.</p>

<h2 id="step-2-install-docker-on-the-remote-server">Step 2: Install Docker on the remote server</h2>

<p>If you haven‚Äôt already done so, you‚Äôll need to install Docker on the remote server. There are plenty of resources online on how to do this, so I won‚Äôt go into details here. The official docker docs have plenty of information on how to install Docker on different platforms.</p>

<p><a href="https://docs.docker.com/engine/install/ubuntu/">Here‚Äôs the link to the instructions for Ubuntu</a>.</p>

<p>Be sure to add your user to the <code class="language-plaintext highlighter-rouge">docker</code> group so you can run docker commands without <code class="language-plaintext highlighter-rouge">sudo</code>.</p>

<h2 id="step-2-enable-ssh-on-the-remote-server">Step 2: Enable ssh on the remote server</h2>

<p>You‚Äôll need to be able to connect to the remote server via ssh. If you‚Äôre using a cloud provider, you‚Äôll likely already have this set up. If you‚Äôre using a local server, or Desktop Ubuntu, you‚Äôll need to install an ssh server.</p>

<p>This is simply done by running:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>openssh-server
</code></pre></div></div>

<p>You‚Äôll likely also need to open the ssh port on your firewall.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>ufw allow ssh
</code></pre></div></div>

<h2 id="step-3-configure-docker-desktop">Step 3: Configure Docker Desktop</h2>

<p>Easy peasy. You just need to set an environment variable to tell Docker Desktop to connect to the remote server.</p>

<p>Try it out in a terminal window. First, set the variable:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$env</span>:DOCKER_HOST<span class="o">=</span><span class="s2">"ssh://your-username@your-server:22"</span>
</code></pre></div></div>

<p>Then run a docker command:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker ps
</code></pre></div></div>

<p>You should get a prompt asking you to accept the server‚Äôs fingerprint, then another prompt asking for your password. If everything goes well, you should see the list of containers running on the remote server. (none if you just installed Docker)</p>

<h2 id="step-4-configure-a-persistent-environment-variable">Step 4: Configure a Persistent Environment Variable</h2>

<p>You don‚Äôt want to have to set the environment variable every time you open a terminal window. Instead, we can set the environment variable for all of Windows.</p>

<p>Right-click on the start button and select ‚ÄúSystem‚Äù. Then click on ‚ÄúAdvanced system settings‚Äù and then ‚ÄúEnvironment Variables‚Äù.</p>

<p>Add a new system variable with the name <code class="language-plaintext highlighter-rouge">DOCKER_HOST</code> and the value <code class="language-plaintext highlighter-rouge">ssh://your-username@your-server</code>.</p>

<p>Any new terminal window you open will now be using the environment variable, and docker commands will connected to the remote server.</p>

<h2 id="step-5-usability-improvements">Step 5: Usability improvements</h2>

<p>As it is, Docker will ask for your password every time you run a command. This can be a very annoying, especially if you‚Äôre running a lot of commands. Some commands, like <code class="language-plaintext highlighter-rouge">docker buildx build</code> implicitly run multiple docker commands, so you‚Äôll be asked for your password multiple times.</p>

<p>Instead, we can use ssh keys to authenticate.</p>

<p>On your Windows machine, generate a new ssh key pair:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen
</code></pre></div></div>

<p>You‚Äôll be asked where to store the key. Be sure to enter this path: <code class="language-plaintext highlighter-rouge">C:\Users\your-username\.ssh\id_rsa</code>. This is the default path where Docker will look for the key. (Some guides will tell you to just accept the default path, but doing so made the ssh-keygen command hang indefinitely in my case.)</p>

<p>You‚Äôll be then asked for a passphrase. I recommend leaving this empty so you don‚Äôt have to enter it every time you run a docker command.</p>

<p>The next step is to copy the public key to the remote server. You can do this with the <code class="language-plaintext highlighter-rouge">ssh-copy-id</code> command, but this command is not available on Windows.</p>

<p>Instead, we can copy the key manually.</p>

<p>First, print the public key:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat</span> ~<span class="se">\.</span>ssh<span class="se">\i</span>d_rsa.pub
</code></pre></div></div>

<p>Copy the whole line that is printed.
Next, connect to the remote server and add the key at the end of the <code class="language-plaintext highlighter-rouge">authorized_keys</code> file, using your favorite text editor (<code class="language-plaintext highlighter-rouge">nano</code> in this case):</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh your-username@your-server
<span class="nb">mkdir</span> <span class="nt">-p</span> ~/.ssh
nano ~/.ssh/authorized_keys
</code></pre></div></div>

<p>This is it! You should now be able to run docker commands without being asked for your password. Try by running <code class="language-plaintext highlighter-rouge">docker ps</code> again in a new terminal window.</p>

<h2 id="conclusion">Conclusion</h2>

<p>While this article focussed on connecting docker to a local server, you can also follow the same steps to connect to a server in the cloud.</p>

<p>This can be useful if you want to run docker commands on a more powerful machine, or if you want to run docker commands on a machine that is serving web traffic to the internet!</p>

      </div><!-- .post-content -->
      
      

<footer class="post-meta">
    Posted on
    <time class="published" datetime="2025-01-21 00:00">
    
        Tuesday, January 21, 2025
    
    </time>
    
</footer>

    </article><!-- .post -->

    <!-- Next/previous post navigation TBD -->
    <!--
    <nav class="read-next">
      <h2 class="read-next-title">Read Next</h2>
      <div class="post-feed">
        <article class="post post-card">
          <div class="post-card-inside">
            <a class="post-card-thumbnail" href="#"><img src="#" alt="" /></a>
            <div class="post-card-content">
              <header class="post-header">
                <h3 class="post-title"><a href="#" rel="bookmark">Previous Post Title</a></h3>
              </header>
              <footer class="post-meta">
                <time class="published" datetime="">Previous post date</time>
              </footer>
            </div>
          </div>
        </article>
        <article class="post post-card">
          <div class="post-card-inside">
            <a class="post-card-thumbnail" href="#"><img src="#" alt="" /></a>
            <div class="post-card-content">
              <header class="post-header">
                <h3 class="post-title"><a href="#" rel="bookmark">Next Post Title</a></h3>
              </header>
              <footer class="post-meta">
                <time class="published" datetime="">Next post date</time>
              </footer>
            </div>
          </div>
        </article>
      </div>
    </nav>
    -->

  </div><!-- .inner-medium -->
</div><!-- .outer-->

  </main><!-- .site-content -->
  <footer id="colophon" class="site-footer">
  <div class="footer-top outer">
    <div class="inner">
      <div class="footer-widgets">

        <div class="widget footer-branding">
          
          
          <p class="site-logo">
            <a href='/'><img src="/images/logo-blur-white.svg" alt="Logo" /></a>
          </p>
          
          
          
          <p class="site-description">
            Free software & tech musings
          </p>
          
        </div><!-- .widget -->

        
        
        
      </div><!-- .footer-widgets -->
    </div><!-- .inner -->
  </div><!-- .outer -->

  <div class="site-info outer">
    <div class="inner">
      Content &copy; Loris Bognanni. All rights reserved. Theme: 
      &nbsp;
      
        
        

<a href="https://www.stackbit.com"
   target="_blank" rel="noopener"
   class="">Azimuth by Stackbit</a>

      
    </div><!-- .inner -->
  </div><!-- .site-info -->

</footer><!-- .site-footer -->

</div><!-- .site -->

        <!-- Scripts -->
        <script src="/js/plugins.js"></script>
        <script src="/js/init.js"></script>
        <script src="/js/main.js"></script>
        <script>
        window.cmParams = { tenant: "codemade" };
        </script>
        <script defer src="https://stats.codemade.net/track.js"></script>
          
    </body> 
</html>
